<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">
	
	<insert id="insertMember" parameterType="MemberVO">
		insert into member 
					(MEM_ID, MEM_PASS, MEM_NAME, MEM_TEL, MEM_ZIP, MEM_ADDR1, MEM_ADDR2, MAIL, REGNO, JOIN_DATE, MEM_STATUS, ADMIN) 
					values (#{memId}, #{memPass}, #{memName}, #{memTel}, #{memZip}, #{memAddr1}, #{memAddr2}, #{mail}, #{regno1}||#{regno2}, sysdate, 'N', 'N')
	</insert>
	
	<insert id="insertIns" parameterType="InsVO">
		insert into institution 
					(MEM_ID, INST_NAME, INST_APPROVE, ATCH_COURSE) 
					values (#{memId}, #{instName}, 'N', #{atchCourse})
	</insert>
	
	<update id="updateMember" parameterType="MemberVO">
		update member 
 			set mem_name = #{memName},
					mem_tel = #{memTel},
					mem_addr = #{memAddr},
					atch_file_id = #{atchFileId}
					where mem_id = #{memId}
	</update>
	
	<update id="updateIns" parameterType="InsVO">
		update institution 
 			set atch_course = #{atchCourse},
					inst_name = #{instName},
					inst_approve = #{instApprove}
					where mem_id = #{memId}
	</update>
	
	<delete id="deleteMember" parameterType="String">
		delete from member where mem_id = #{memId}
	</delete>
	
	<delete id="deleteIns" parameterType="String">
		delete from institution where mem_id = #{memId}
	</delete>
	
	<select id="searchId" parameterType="String" resultType="MemberVO">
		select mem_id
		from member
		where mem_name = #{memName}
		and mem_tel = #{memTel}
	</select>
	
	<select id="searchPw" parameterType="String" resultType="MemberVO">
		select mem_pass
		from member
		where mem_id = #{memId}
		and mail = #{mail}
	</select>
	
	<select id="checkId" parameterType="member.vo.MemberVO" resultType="MemberVO">
		select * 
		from member
		where mem_id = #{memId}
	</select>
	
	<select id="checkMember" parameterType="member.vo.MemberVO" resultType="MemberVO">
		select * 
		from member
		where mem_id = #{memId}
		and mem_pass = #{memPass}
	</select>
	
	<select id="selectMember" parameterType="String" resultType="MemberVO">
		select *
		from member
		where mem_id = #{memId}
	</select>
	
	<select id="selectIns" parameterType="String" resultType="InsVO">
		select *
		from institution
		where mem_id = #{memId}
	</select>
	
</mapper>